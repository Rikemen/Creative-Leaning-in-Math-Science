# 微分係数の視覚化プログラム解説

## 1. 導入（0:00-0:30）
「こんにちは！今日は微分係数を視覚的に理解するためのプログラムを解説していきます。このプログラムでは、二次関数のグラフとその接線を描画し、マウスクリックで任意の点における接線を表示することができます。」

## 2. 全体の構成（0:30-1:00）
「プログラムは大きく分けて4つの主要な部分で構成されています：
1. グラフの描画
2. 微分係数の計算
3. 接線の描画
4. マウスインタラクション
それぞれの部分を詳しく見ていきましょう。」

## 3. グラフの描画（1:00-2:00）
「まず、`setup`関数で800x800ピクセルのキャンバスを作成します。`draw`関数では、座標系を画面中央に移動し、Y軸を上向きに設定しています。

```javascript
function setup() {
    createCanvas(800, 800);
}

function draw() {
    translate(width / 2, height / 2);
    scale(1, -1);
```

次に、二次関数 f(x) = 0.01x² のグラフを描画します。`beginShape`と`endShape`を使って、-200から200までの範囲で関数の値を計算し、滑らかな曲線を描いています。」

## 4. 微分係数の計算（2:00-3:00）
「微分係数の計算は`derivative`関数で行っています。数値微分の公式：
f'(x) = (f(x+h) - f(x)) / h
を使用して、微小な変化量hに対する関数の変化率を計算します。

```javascript
function derivative(f, x, h = 1e-3) {
    return (f(x + h) - f(x)) / h;
}
```

この計算により、任意の点における関数の傾き（微分係数）を求めることができます。」

## 5. 接線の描画（3:00-4:00）
「`drawTangent`関数では、指定された点における接線を描画します。接線は、その点における微分係数（傾き）を使って計算されます。

```javascript
function drawTangent(x0, y0, slope, length = 50) {
    stroke(255, 0, 0);
    let x1 = x0 - length;
    let y1 = slope * (x1 - x0) + y0;
    let x2 = x0 + length;
    let y2 = slope * (x2 - x0) + y0;
    line(x1, y1, x2, y2);
}
```

接線は赤色で表示され、接点は黒い円で示されます。」

## 6. インタラクション（4:00-5:00）
「マウスクリックで任意の点における接線を表示できます。`mouseClicked`関数で、クリックした位置の座標を取得し、その点における接線を描画します。

```javascript
function mouseClicked() {
    let x0 = mouseX - width / 2;
    drawTangent(x0, f(x0), derivative(f, x0));
}
```

これにより、グラフ上の任意の点における接線の傾きを視覚的に確認することができます。」

## 7. まとめ（5:00-5:30）
「このプログラムでは、微分係数の概念を視覚的に理解することができます。グラフ上の任意の点をクリックすることで、その点における接線の傾きを確認でき、微分係数の意味を直感的に理解することができます。

実際にプログラムを動かしてみて、様々な点における接線の傾きの変化を観察してみましょう。」
