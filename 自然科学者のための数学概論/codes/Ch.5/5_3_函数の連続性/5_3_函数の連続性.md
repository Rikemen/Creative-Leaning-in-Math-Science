# 複素関数の可視化：写像と連続性 (Section 5.3)

このドキュメントは、教科書 5.3節「函数の連続性」で語られる概念を、p5.jsを用いたプログラミングによって視覚化するための解説です。
複素関数 $w=f(z)$ を「グラフ」ではなく「2つの平面間の写像」として捉えるアプローチを実装しています。

## 1. 数学的な対象

### 複素関数としての写像 (Mapping)
実数関数 $y=f(x)$ と異なり、複素関数 $w=f(z)$ は4次元的な情報（入力2次元＋出力2次元）を持つため、1つのグラフで描くことが困難です。
そこで、教科書にあるように2つの複素平面を用意して考えます。

* **入力**: $z$ 平面 ($z = x + iy$)
* **出力**: $w$ 平面 ($w = u + iv$)

### 具体例：2次関数
本プログラムでは、以下の関数を実装例としています。
$$w = z^2$$
これを作分すると $u + iv = (x^2 - y^2) + i(2xy)$ となり、入力平面のグリッド（直線）が、出力平面では放物線群に歪められる様子が観察できます。

### 連続性 (Continuity)
関数が連続であるとは、点 $a$ に近づく入力 $z$ に対して、出力 $f(z)$ も $f(a)$ に近づくことを意味します。
$$\lim_{z \to a} f(z) = f(a)$$
幾何学的には、「入力平面での小さな円」が「出力平面での（歪んではいるが）閉じた領域」に写され、ちぎれたり飛び散ったりしないことで確認できます。

## 2. 実装の流れ (Algorithm)

### A. 画面分割 (Split Screen)
画面を左右に分割し、それぞれ独立した座標系として扱います。
* **左側**: $z$ 平面（入力）。マウス操作を行う領域。
* **右側**: $w$ 平面（出力）。計算結果が表示される領域。

### B. グリッドの写像 (Grid Mapping)
空間の変形を可視化するために、「格子模様」を写像します。
1.  $z$ 平面上の縦線・横線を走査。
2.  各点について $w = z \times z$ を計算。
3.  変換後の点を繋いで描画。
    * *結果*: 直交する直線が、曲線に変形される様子が可視化されます。

### C. 近傍の可視化 (Neighborhood Interaction)
「連続性」を体感するためのインタラクションです。
1.  マウス位置 $z_0$ の周囲に、半径 $\varepsilon$ の円（近傍）を計算上の点として生成。
2.  それら全ての点を関数で変換。
3.  $w$ 平面上に変換された図形を描画。
    * 元の円が「ちぎれずに」歪んだ楕円のような形になる様子から、関数が連続であることを確認します。

## 3. コードのポイント
* **`Complex` クラスの利用**: 数式 $w=z^2$ を `w = z.mult(z)` と直感的に記述。
* **順写像**: $z$ から $w$ を計算するアプローチを採用し、関数の「動き」を表現。

---
*Created by 作って学ぶ数学題材サポート*