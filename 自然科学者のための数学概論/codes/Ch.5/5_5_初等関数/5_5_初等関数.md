
# 複素初等関数の可視化：指数・三角・対数関数

このドキュメントは、複素解析における基本的な初等関数（指数関数、三角関数、対数関数）の挙動を、p5.jsを用いて視覚的に理解するためのシミュレーションコードの解説です。
教科書（5.5 初等関数）で定義されている数式が、幾何学的にどのような「空間の変形」を引き起こすかを実装しています。

## 1. 数学的な対象

プログラムでは、以下の3つの主要な複素関数を実装し、切り替えて観察できるようにしています。

### A. 指数関数 (Exponential Function)
$$w = e^z = e^{x+iy}$$
オイラーの公式 $e^{ix} = \cos x + i \sin x$ を用いて計算します。
* **数式**: $e^z = e^x (\cos y + i \sin y)$
* **幾何学的意味**:
    * 実部 $x$ は出力の **大きさ（原点からの距離）** に対応。
    * 虚部 $y$ は出力の **偏角（回転角）** に対応。
    * 直交座標のグリッドを、極座標系（放射状の線と円）に変換する写像です。

### B. 三角関数 (Trigonometric Function)
$$w = \sin z$$
複素数の世界では、三角関数は指数関数を用いて定義されます。
* **数式**: $\sin z = \frac{e^{iz} - e^{-iz}}{2i}$
* **成分表示**: $\sin(x+iy) = \sin x \cosh y + i \cos x \sinh y$
* **幾何学的意味**:
    * 実軸付近では通常の波形ですが、虚部 $y$ が大きくなると $\cosh y, \sinh y$ が急激に増大するため、値が無限に大きくなります。
    * グリッドを「共焦点の楕円」と「双曲線」の直交網に変形します。

### C. 対数関数 (Logarithmic Function)
$$w = \log z$$
指数関数 $e^w = z$ の逆関数ですが、複素数では「多価関数」となります。
* **数式**: $\log z = \log|z| + i(\arg z + 2n\pi)$
* **実装上の注意**: プログラムでは $n=0$ の **主値 (Principal Value)** のみを計算しています。
* **幾何学的意味**:
    * $e^z$ の逆変換であり、平面全体を「幅 $2\pi$ の帯状の領域」に押し込めます。
    * **切断 (Branch Cut)**: 偏角が $-\pi$ から $\pi$ に飛ぶ場所（負の実軸）で、描画上の不連続面が現れます。

## 2. 実装の流れ (Algorithm)

### A. クラスの拡張 (Complex Class Extension)
数値計算を扱う `Complex` クラスに、教科書の定義通りのメソッドを追加実装しました。

```javascript
// 例: 指数関数の実装
exp() {
    let r = Math.exp(this.re); // e^x
    return new Complex(r * Math.cos(this.im), r * Math.sin(this.im));
}