# 1.3 合成関数・逆関数の微分 - 視覚化ツール

本プロジェクトは、『自然科学者のための数学概論』の第1.3節「合成関数・逆関数の微分」における数学的概念を、p5.jsを用いて動的に視覚化するための学習ツールです。

## スクリプトの意図と役割

### `sketch.js`（メイン・コントロール）
このファイルは、本視覚化システムの**エントリーポイントであり、学習内容の設定を行う中心的な役割**を担います。

- **具体例による学習**:
    - **合成関数の例**: $f(u) = u^2/4$ と $g(x) = 2\sin(x)$ を組み合わせた $h(x) = \sin^2(x)$ をデフォルトで視覚化しています。「内側の関数の変化量」が「外側の関数の変化」にどう伝播するか（チェインルール）を観察できます。
    - **逆関数の例**: 指数関数 $f(x) = e^{0.5x}$ と対数関数 $f^{-1}(y) = 2\ln(y)$ の例をコード内に含んでいます。これらは $y=x$ に関して対称であり、一方の傾き $f'(x)$ が決まれば、逆関数の傾きがその逆数 $1/f'(x)$ になる（逆関数定理）ことを数値的に確認できます。
- **インタラクション**: マウスでグラフ上の点を選択すると、その点における接線と微分係数を表示します。

## 構成ファイルの詳細

- **`math-utils.js`**: 
    - `calculateDerivative`: 数値微分（前進差分）を計算。
    - `createCombinedDerivatives`: 合成関数 $(f \circ g)$ の導関数などを生成。
    - `createInverseDerivative`: 逆関数定理に基づき、元の関数 $f$ から逆関数の微分係数 $1/f'(x)$ を計算。
- **`drawing-utils.js`**: p5.js を用いたグラフ、座標軸、接線の描画処理を担当。
- **`config.js`**: 色彩設計やグリッドスケールなどのデザイン設定。

## 使い方
1. `index.html` をブラウザで開きます。
2. デフォルトでは合成関数 $h(x) = \sin^2(x)$ が描画されています。
3. グラフ上をドラッグすると、その点での接線が表示され、コンソール（F12）に逆関数の微分係数の計算結果が出力されます。
4. `sketch.js` 内のコメントアウトを切り替える（以下のコード箇所）ことで、逆関数の視覚化に切り替え可能です。
   ```javascript
   // --- 逆関数の視覚化（表示したい場合は有効化） ---
   drawGraph(f_inv, [100, 200, 100]); // 元の関数
   drawGraph(g_inv, [200, 100, 100]); // 逆関数
   ```
