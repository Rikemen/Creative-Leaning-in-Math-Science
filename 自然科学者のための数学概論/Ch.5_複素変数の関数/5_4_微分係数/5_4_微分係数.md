
# 複素微分の可視化：コーシー・リーマンの方程式 (Section 5.4)

このドキュメントは、教科書 5.4節「微分係数」における最重要概念、**「正則性（Regularity）」と「コーシー・リーマンの方程式」**の意味を実験的に理解するための解説です。
「微分可能である」ということが、複素数の世界ではいかに厳しい条件（方向によらないこと）であるかをシミュレーションします。

## 1. 数学的な対象

### 複素微分 (Complex Derivative)
複素関数 $f(z)$ が点 $z$ で微分可能であるためには、以下の極限が一意に定まらなければなりません。

$$f'(z) = \lim_{h \to 0} \frac{f(z+h) - f(z)}{h}$$

ここで重要なのは、**$h$ が $0$ に近づく方向（角度）は360度あらゆる方向があり得る**という点です。
「どの方向から近づいても、変化の割合（微分係数）が同じ値になる」ことこそが、正則関数の条件です。

### 比較する関数
1.  **正則関数**: $f(z) = z^2$
    * どこから近づいても微分係数は $2z$ になります。
2.  **非正則関数**: $f(z) = \bar{z}$ （共役複素数）
    * 実軸方向の変化と、虚軸方向の変化が食い違うため、微分できません。

## 2. 実装の流れ (Algorithm)

### A. 微分係数の候補平面 (Derivative Plane)
画面右側に、関数の値そのものではなく、**「変化の割合（差分商）」**をプロットする平面を用意します。
$$\text{Plot: } D = \frac{f(z+h) - f(z)}{h}$$

### B. 方向依存性のテスト (Directionality Test)
マウスで指定した点 $z$ に対して、微小な半径 $r$ で周囲360度から近づく点 $h$ を生成し、シミュレーションします。

1.  ループで $0$ から $2\pi$ まで角度を変える。
2.  各角度の $h$ について、差分商 $D$ を計算。
3.  計算結果を右画面にプロットし、角度に対応した色をつける。

### C. 結果の観察
* **正則の場合 ($z^2$)**: 右画面の点は、色に関わらず**一点に集中**します。これが「微分係数が存在する」状態です。
* **非正則の場合 ($\bar{z}$)**: 右画面の点は一点に集まらず、**円を描いてバラけます**。近づく方向によって値が変わるため、微分不可能（コーシー・リーマンの関係を満たさない）であることが一目瞭然となります。

## 3. コードのポイント
* **極限の可視化**: 数式上の $\lim_{h \to 0}$ を、プログラムでは「非常に小さな $h$ での計算結果の集合」として表現しています。
* **反例の提示**: 単に $z^2$ を描画するだけでなく、微分できない $\bar{z}$ を対比させることで、複素微分の特殊性を際立たせています。

---
*Created by 作って学ぶ数学題材サポート*